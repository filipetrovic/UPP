<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_0d35bxy" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="2.0.3">
  <bpmn:process id="Process_1" isExecutable="true">
    <bpmn:startEvent id="StartEvent_1">
      <bpmn:outgoing>SequenceFlow_12k1jsa</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:serviceTask id="ServiceTask_18b28qv" name="Check magazine type" camunda:class="ftn.upp.naucnacentrala.delegate.CheckMagazineType">
      <bpmn:incoming>SequenceFlow_12k1jsa</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1h5zwx2</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="SequenceFlow_12k1jsa" sourceRef="StartEvent_1" targetRef="ServiceTask_18b28qv" />
    <bpmn:userTask id="UserTask_132e1zk" name="ScientificWork submission" camunda:assignee="${userId}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="title" label="title" type="string" />
          <camunda:formField id="abstract" label="abstract" type="string" />
          <camunda:formField id="keywords" label="keywords" type="string" />
          <camunda:formField id="coauthors" label="coauthors" type="string" />
          <camunda:formField id="scientificFieldId" label="scientificFieldId" type="long" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_0xyx6si</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_01bygq4</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="ExclusiveGateway_1wgx5i5">
      <bpmn:incoming>SequenceFlow_1h5zwx2</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1b1vadt</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_1qrjgws</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_1h5zwx2" sourceRef="ServiceTask_18b28qv" targetRef="ExclusiveGateway_1wgx5i5" />
    <bpmn:exclusiveGateway id="ExclusiveGateway_0t4vtye">
      <bpmn:incoming>SequenceFlow_1b1vadt</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_0zabpqg</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_1lyfff9</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0xyx6si</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_1b1vadt" name="Magazine is open access" sourceRef="ExclusiveGateway_1wgx5i5" targetRef="ExclusiveGateway_0t4vtye">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isOpenAccess}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_0xyx6si" sourceRef="ExclusiveGateway_0t4vtye" targetRef="UserTask_132e1zk" />
    <bpmn:serviceTask id="Task_1xxy6qi" name="Check Subscription" camunda:class="ftn.upp.naucnacentrala.delegate.CheckSubscription">
      <bpmn:incoming>SequenceFlow_1qrjgws</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0l9o7pq</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="ExclusiveGateway_17wcadk">
      <bpmn:incoming>SequenceFlow_0l9o7pq</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0urvko5</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_1lyfff9</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_0l9o7pq" sourceRef="Task_1xxy6qi" targetRef="ExclusiveGateway_17wcadk" />
    <bpmn:sequenceFlow id="SequenceFlow_0urvko5" sourceRef="ExclusiveGateway_17wcadk" targetRef="Task_0bsl35p">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!subscriptionPayed}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_0zabpqg" sourceRef="Task_0bsl35p" targetRef="ExclusiveGateway_0t4vtye" />
    <bpmn:sequenceFlow id="SequenceFlow_1lyfff9" name="Subscription payed" sourceRef="ExclusiveGateway_17wcadk" targetRef="ExclusiveGateway_0t4vtye">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${subscriptionPayed}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:userTask id="Task_0bsl35p" name="Pay Subscription" camunda:assignee="${userId}">
      <bpmn:incoming>SequenceFlow_0urvko5</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0zabpqg</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="SequenceFlow_1qrjgws" sourceRef="ExclusiveGateway_1wgx5i5" targetRef="Task_1xxy6qi">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!isOpenAccess}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sendTask id="SendTask_19wf83s" name="Send notifications to author and chief editor" camunda:class="ftn.upp.naucnacentrala.delegate.SendNotificationsAfterSubmittingWork">
      <bpmn:incoming>SequenceFlow_01bygq4</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_16og40r</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:sequenceFlow id="SequenceFlow_01bygq4" sourceRef="UserTask_132e1zk" targetRef="SendTask_19wf83s" />
    <bpmn:userTask id="Task_1wx6xiv" name="ScientificWork check" camunda:assignee="${chiefEditorId}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="approve" label="approve" type="boolean" />
          <camunda:formField id="badFormatting" label="badFormatting" type="boolean" />
          <camunda:formField id="notRelevant" label="notRelevant" type="boolean" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_16og40r</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0h124dm</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_00ltods</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="SequenceFlow_16og40r" sourceRef="SendTask_19wf83s" targetRef="Task_1wx6xiv" />
    <bpmn:sendTask id="Task_0qafpl3" name="Send failure notification" camunda:class="ftn.upp.naucnacentrala.delegate.SendFailureNotification">
      <bpmn:incoming>SequenceFlow_0h124dm</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_15pd3t9</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:endEvent id="EndEvent_1mxktzc">
      <bpmn:incoming>SequenceFlow_15pd3t9</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_15pd3t9" sourceRef="Task_0qafpl3" targetRef="EndEvent_1mxktzc" />
    <bpmn:sequenceFlow id="SequenceFlow_0h124dm" sourceRef="Task_1wx6xiv" targetRef="Task_0qafpl3">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${notRelevant=="true"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:endEvent id="EndEvent_15wjwia">
      <bpmn:incoming>SequenceFlow_00ltods</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_00ltods" sourceRef="Task_1wx6xiv" targetRef="EndEvent_15wjwia">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${notRelevant!="true"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1">
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="171" y="107" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_18b28qv_di" bpmnElement="ServiceTask_18b28qv">
        <dc:Bounds x="261" y="85" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_12k1jsa_di" bpmnElement="SequenceFlow_12k1jsa">
        <di:waypoint x="207" y="125" />
        <di:waypoint x="261" y="125" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_132e1zk_di" bpmnElement="UserTask_132e1zk">
        <dc:Bounds x="1034" y="85" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_1wgx5i5_di" bpmnElement="ExclusiveGateway_1wgx5i5" isMarkerVisible="true">
        <dc:Bounds x="415" y="100" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1h5zwx2_di" bpmnElement="SequenceFlow_1h5zwx2">
        <di:waypoint x="361" y="125" />
        <di:waypoint x="415" y="125" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_0t4vtye_di" bpmnElement="ExclusiveGateway_0t4vtye" isMarkerVisible="true">
        <dc:Bounds x="875" y="100" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1b1vadt_di" bpmnElement="SequenceFlow_1b1vadt">
        <di:waypoint x="465" y="125" />
        <di:waypoint x="875" y="125" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="627" y="128" width="87" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0xyx6si_di" bpmnElement="SequenceFlow_0xyx6si">
        <di:waypoint x="925" y="125" />
        <di:waypoint x="1034" y="125" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_0pqu90h_di" bpmnElement="Task_1xxy6qi">
        <dc:Bounds x="512" y="3" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_17wcadk_di" bpmnElement="ExclusiveGateway_17wcadk" isMarkerVisible="true">
        <dc:Bounds x="659" y="18" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0l9o7pq_di" bpmnElement="SequenceFlow_0l9o7pq">
        <di:waypoint x="612" y="43" />
        <di:waypoint x="659" y="43" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0urvko5_di" bpmnElement="SequenceFlow_0urvko5">
        <di:waypoint x="684" y="18" />
        <di:waypoint x="684" y="-40" />
        <di:waypoint x="752" y="-40" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0zabpqg_di" bpmnElement="SequenceFlow_0zabpqg">
        <di:waypoint x="852" y="-40" />
        <di:waypoint x="900" y="-40" />
        <di:waypoint x="900" y="100" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1lyfff9_di" bpmnElement="SequenceFlow_1lyfff9">
        <di:waypoint x="709" y="43" />
        <di:waypoint x="900" y="43" />
        <di:waypoint x="900" y="100" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="771" y="44" width="61" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_0it6957_di" bpmnElement="Task_0bsl35p">
        <dc:Bounds x="752" y="-80" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1qrjgws_di" bpmnElement="SequenceFlow_1qrjgws">
        <di:waypoint x="440" y="100" />
        <di:waypoint x="440" y="43" />
        <di:waypoint x="512" y="43" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="SendTask_19wf83s_di" bpmnElement="SendTask_19wf83s">
        <dc:Bounds x="1034" y="219" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_01bygq4_di" bpmnElement="SequenceFlow_01bygq4">
        <di:waypoint x="1084" y="165" />
        <di:waypoint x="1084" y="219" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_0os3c0i_di" bpmnElement="Task_1wx6xiv">
        <dc:Bounds x="840" y="219" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_16og40r_di" bpmnElement="SequenceFlow_16og40r">
        <di:waypoint x="1034" y="259" />
        <di:waypoint x="940" y="259" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="SendTask_1euukw1_di" bpmnElement="Task_0qafpl3">
        <dc:Bounds x="261" y="219" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_1mxktzc_di" bpmnElement="EndEvent_1mxktzc">
        <dc:Bounds x="171" y="241" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_15pd3t9_di" bpmnElement="SequenceFlow_15pd3t9">
        <di:waypoint x="261" y="259" />
        <di:waypoint x="207" y="259" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0h124dm_di" bpmnElement="SequenceFlow_0h124dm">
        <di:waypoint x="840" y="259" />
        <di:waypoint x="361" y="259" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="EndEvent_15wjwia_di" bpmnElement="EndEvent_15wjwia">
        <dc:Bounds x="728" y="343" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_00ltods_di" bpmnElement="SequenceFlow_00ltods">
        <di:waypoint x="890" y="299" />
        <di:waypoint x="890" y="361" />
        <di:waypoint x="764" y="361" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
